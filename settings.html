<!-- Main container for the extension's settings UI -->
<div class="attachment-remover-settings">
    <!-- This div creates the collapsible "drawer" effect common in SillyTavern -->
    <div class="inline-drawer">
        
        <!-- The clickable header for the drawer -->
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>üóëÔ∏è Attachment Remover</b>
            <!-- The down-arrow icon that indicates it can be opened/closed -->
            <div class="inline-drawer-icon fa-solid fa-chevron-down down"></div>
        </div>
        
        <!-- This is the content that gets shown or hidden when the drawer is toggled -->
        <div class="inline-drawer-content">
            
            <!-- A description box to explain what the extension does -->
            <div class="attachment-remover-description">
                <p>Automatically removes user-sent image/file attachments from the chat after the AI responds. Keeps your chat log clean and reduces memory usage.</p>
            </div>
            
            <!-- A horizontal rule for visual separation -->
            <hr>
            
            <!-- A logical grouping for a single setting -->
            <div class="form-group">
                <!-- The label is associated with the checkbox via the 'for' attribute, which improves accessibility -->
                <label class="checkbox_label" for="attachment_remover_enable">
                    <input type="checkbox" id="attachment_remover_enable">
                    <!-- A span to group the title and description of the setting -->
                    <span class="setting-title">
                        <strong>üîß Enable Attachment Removal</strong>
                        <small>Activates the automatic attachment removal feature.</small>
                    </span>
                </label>
            </div>
            
            <hr>
            
            <div class="form-group">
                <label class="checkbox_label" for="attachment_remover_all_messages">
                    <input type="checkbox" id="attachment_remover_all_messages">
                    <span class="setting-title">
                        <strong>üìù Remove from All User Messages</strong>
                        <small>If enabled, removes attachments from all user messages in the current turn. If disabled, only from the most recent.</small>
                    </span>
                </label>
            </div>
            
            <div class="form-group">
                <label class="checkbox_label" for="attachment_remover_images_only">
                    <input type="checkbox" id="attachment_remover_images_only">
                    <span class="setting-title">
                        <strong>üñºÔ∏è Remove Images Only</strong>
                        <small>Only remove image attachments, leaving other file types (documents, audio, etc.) intact.</small>
                    </span>
                </label>
            </div>
            
            <div class="form-group">
                <label class="checkbox_label" for="attachment_remover_preserve_first">
                    <input type="checkbox" id="attachment_remover_preserve_first">
                    <span class="setting-title">
                        <strong>üõ°Ô∏è Preserve First Message</strong>
                        <small>Never remove attachments from the very first message in the entire conversation.</small>
                    </span>
                </label>
            </div>
            
            <hr>
            
            <!-- A styled container for advanced or less-common options -->
            <div class="attachment-remover-advanced">
                <h4>‚öôÔ∏è Advanced Options</h4>
                <div class="form-group">
                    <label class="checkbox_label" for="attachment_remover_auto_cleanup">
                        <input type="checkbox" id="attachment_remover_auto_cleanup">
                        <span class="setting-title">
                            <strong>üßπ Auto Cleanup</strong>
                            <small>Automatically trigger a chat save/cleanup after removing attachments.</small>
                        </span>
                    </label>
                </div>
                <div class="form-group">
                    <label class="checkbox_label" for="attachment_remover_debug">
                        <input type="checkbox" id="attachment_remover_debug">
                        <span class="setting-title">
                            <strong>üêõ Debug Mode</strong>
                            <small>Show detailed logging in the browser console (F12 ‚Üí Console tab).</small>
                        </span>
                    </label>
                </div>
            </div>
            
            <hr>
            
            <!-- A help section using the native <details> and <summary> elements for an accessible accordion -->
            <div class="attachment-remover-help">
                <h4>‚ùì Troubleshooting & Help</h4>
                <details>
                    <summary><strong>Attachments not disappearing?</strong></summary>
                    <div class="help-content">
                        <p><strong>Common solutions:</strong></p>
                        <ul>
                            <li>Make sure the extension is <strong>enabled</strong> using the toggle above.</li>
                            <li>Enable <strong>Debug Mode</strong> and check the browser console (F12) for errors.</li>
                            <li>Try refreshing the page (F5) and re-enabling the extension.</li>
                        </ul>
                    </div>
                </details>
                <details>
                    <summary><strong>How does it work?</strong></summary>
                    <div class="help-content">
                        <p>The extension monitors the chat for new AI messages. When an AI responds, it scans backwards through user messages and removes attachments based on your settings.</p>
                        <ol>
                            <li>An AI message is detected.</li>
                            <li>The extension scans the previous messages in the current "turn".</li>
                            <li>Attachments are removed according to your settings (e.g., images only, all messages).</li>
                            <li>The scan stops when it reaches the previous AI message or the start of the chat.</li>
                        </ol>
                    </div>
                </details>
            </div>

        </div>
    </div>
</div>